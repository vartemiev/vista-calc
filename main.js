(()=>{"use strict";const e="withLeverage",t="withoutLoan",o="onceUpdate",r="withLoan",n=["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],c=[2.29,2.19,1.23,1.16,2.28,2.23,1.95,2,1.93,2.17,1.95,2.08,2.32,2.23,1.23,1.16,2.28,2.23,1.95,2,1.93,2.17,1.95,2.08,2.32,2.23,1.23,1.16,2.28,2.23,1.95,2,1.93,2.17,1.95,2.08,2.32,2.23,1.23,1.94,2.07,1.87,1.76,1.37,1.23,2.15,2.17,1.83,2.21,1.94,2.16,1.56,2.23,2.52,2.14,2.41,2.16,2.21,1.71,1.8,2.07,2.25,1.62,1.15,2.05,2.16,1.96,1.87,2.14,2.07,1.98,2.23,2.25,2.32,1.26,1.06,2.25,2.14,1.98,1.78,2.25,2.52,2.32,1.87,2.07,1.89,1.26,.86,2.52,2.61,1.15,2.16,1.26,2.43,1.08,2.5,2.7,2.61,.18,.81,2.25,2.07,2.16,2.32,2.05,1.62,2.23,2.52,2.41,2.14,.9,.72,2.61,2.25,2.5,2.07,2.41,2.16,2.14,1.8,2.52,2.43,1.14],l=1e4,a=1.95,u=.07,d=e=>+e.toFixed(2),i=e=>d(.7*e),s=e=>d(e/3*7),y=e=>d(.2*e),m=e=>d(e/12/100),h=e=>d(7*e/12/100),S={withLeverage:(e,t)=>d(e-y(e)-m(t+s(t))-h(s(t))),withLoan:(e,t)=>d(e-y(e)-m(t+i(t))-h(i(t))),withoutLoan:(e,t)=>d(e-y(e)-m(t)),onceUpdate:(e,t,o)=>d(e-y(e)-m(t)-h(o))},q={withLeverage:(e,t)=>Math.ceil((10*e-3*t)/3.7),withLoan:(e,t)=>Math.ceil((1.7*e-t)/1.119),withoutLoan:(e,t)=>e-t},w={withLeverage:(e,t)=>d((e+s(e))*t/100),withLoan:(e,t)=>d((e+i(e))*t/100),withoutLoan:(e,t)=>d(e*t/100)},v=e=>{const t=Math.round(e).toString().split("");let o="";for(;t.length>0;)o+=t.splice(0,t.length%3||3).join(""),o+=" ";return o},L=(e,t,o,r)=>{let n=e-100>l?e-100:l,i=Math.round(e-100-u*n);c.slice(-t).forEach((e=>{const t=q[r](i,n);t>0&&(n+=t,i=d(i-t*u));const c=w[r](i,e),l=S[r](c,i);i=d(i+l+o)})),i-=o;const s=w[r](i,a),y=S[r](s,i);document.querySelector("#amount").innerText=v(i),document.querySelector("#our").innerText=v(o*t+e),document.querySelector("#profit").innerText=v(Math.floor(y)),document.querySelector("#new-result").style.display="block"};document.querySelector("#calculate").addEventListener("click",(()=>{const n=document.querySelector('[name="radio-group1"]:checked').id,i=document.querySelector('[name="radio-group2"]:checked').id,y=+document.querySelector("#start").value,m=+document.querySelector("#monthsCount").value,h=(e=>{switch(e){case"noAddNoRemove":return 0;case"addMonthly":return+document.querySelector("#monthValue").value;case"removeMonthly":return-+document.querySelector("#monthValue").value}})(i);switch(n){case e:L(y,m,h,e);break;case r:L(y,m,h,r);break;case t:return void L(y,m,h,t);case o:return void((e,t,o)=>{let r=e-100>l?e-100:l,n=Math.round(e-100-u*r);const i=q.withLeverage(n,r);i>0&&(r+=i,n=d(n-i*u));const y=s(n);n+=y;const m=n;c.slice(-t).forEach(((e,t)=>{const c=q.withoutLoan(m+t*o,r);c>0&&(r+=c,n=d(n-c*u));const l=w.withoutLoan(n,e),a=S.onceUpdate(l,n,y);n=d(n+a+o)})),n-=o;const h=w.withoutLoan(n,a),L=S.withLoan(h,n);document.querySelector("#amount").innerText=v(n-y),document.querySelector("#our").innerText=v(o*t+e),document.querySelector("#profit").innerText=v(Math.floor(L)),document.querySelector("#new-result").style.display="block"})(y,m,h)}})),document.querySelector("#leverage-calc").addEventListener("click",(()=>{const e=+document.querySelector("#balance").value,t=+document.querySelector("#loan").value;let o=+document.querySelector("#contract").value,r=d(e-t);const n=q.withLeverage(r,o);n>0&&(o=Math.ceil(o+n),r=d(r-n*u),document.querySelector("#new-contract").innerText=`${v(o)} EUR`,document.querySelector("#result-amount").innerText=`${v(r)} EUR`),document.querySelector("#leverage-result").innerText=`${v(Math.floor(s(r)))} EUR`,document.querySelector("#result").style.display="block"})),(()=>{const t=document.querySelector("#new-account-tab"),c=document.querySelector("#leverage-tab"),d=document.querySelector("#new-account"),i=document.querySelector("#leverage");t.addEventListener("click",(()=>{t.classList.add("active"),c.classList.remove("active"),d.style.display="block",i.style.display="none"})),c.addEventListener("click",(()=>{t.classList.remove("active"),c.classList.add("active"),d.style.display="none",i.style.display="block"})),document.querySelector("#removeMonthly").addEventListener("change",(()=>{document.querySelector("#withdrawLabel").style.display="block",document.querySelector("#addLabel").style.display="none",document.querySelector("#max-withdraw").style.display="block",document.querySelector("#withdraw-amount").innerText=(()=>{const t=+document.querySelector("#start").value,n=t-100>l?t-100:l,c=Math.round(t-100-u*n),d=document.querySelector('[name="radio-group1"]:checked').id;return Math.floor(((t,n)=>{let c;switch(n){case e:case o:c=3.55;break;case r:c=2.09;break;default:c=a}return t*c/100})(c,d))})()})),document.querySelector("#addMonthly").addEventListener("change",(()=>{document.querySelector("#withdrawLabel").style.display="none",document.querySelector("#addLabel").style.display="block",document.querySelector("#max-withdraw").style.display="none"})),document.querySelector("#noAddNoRemove").addEventListener("change",(()=>{document.querySelector("#new-monthlyWithdraw").style.display="none",document.querySelector("#new-monthlyAdding").style.display="none",document.querySelector("#max-withdraw").style.display="none"})),t.click(),fetch("https://www.cbr-xml-daily.ru/daily_json.js").then((e=>e.json())).then((e=>{document.querySelector("#eurValue").innerText=e.Valute.EUR.Value,document.querySelector("#eurDate").innerText=(e=>{const[t]=e.split("T"),[o,r,c]=t.split("-");return`${c} ${n[+r-1]} ${o}`})(e.Date),document.querySelector("#eurRate").style.display="block"}))})()})();